[gd_scene load_steps=14 format=3 uid="uid://8tmgt00yc6a3"]

[ext_resource type="Script" uid="uid://1crl7nopt4jt" path="res://scripts/level.gd" id="1_2r41h"]
[ext_resource type="Texture2D" uid="uid://3btsldktxokk" path="res://assets/city.png" id="1_ppgk2"]
[ext_resource type="Texture2D" uid="uid://0boxs1e5f3qk" path="res://assets/mytrack2d.png" id="1_w8frs"]
[ext_resource type="Texture2D" uid="uid://sva8u1qa4mas" path="res://assets/finishline.png" id="2_mx8sn"]
[ext_resource type="PackedScene" uid="uid://drnic87uc5aqw" path="res://scenes/ui.tscn" id="2_olg7q"]
[ext_resource type="PackedScene" uid="uid://bibnqau26hlak" path="res://scenes/player.tscn" id="3_w8frs"]
[ext_resource type="Script" uid="uid://qd6s2vg7u1ji" path="res://scripts/player.gd" id="4_mx8sn"]
[ext_resource type="Script" uid="uid://d3kbxoj0x7nyi" path="res://scripts/crash.gd" id="7_klq6b"]
[ext_resource type="Script" uid="uid://b0yk0m4ysexfa" path="res://scripts/coin_area.gd" id="8_8c41q"]
[ext_resource type="PackedScene" uid="uid://dqh8uiruxcj5m" path="res://scenes/coin_instance.tscn" id="8_b121j"]
[ext_resource type="AudioStream" uid="uid://cgcy1sv03ufed" path="res://assets/audio/bump.wav" id="11_t1rx8"]
[ext_resource type="AudioStream" uid="uid://d102xm1rofccp" path="res://assets/audio/art deco instrumental but itâ€™s slightly slowed at the majestical part.mp3" id="12_8iemx"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8c41q"]
size = Vector2(359.824, 49.998047)

[node name="Level" type="Node2D"]
script = ExtResource("1_2r41h")

[node name="UI" parent="." instance=ExtResource("2_olg7q")]

[node name="city" type="Sprite2D" parent="."]
position = Vector2(134, 215)
scale = Vector2(11.952711, 9.87956)
texture = ExtResource("1_ppgk2")

[node name="Circuit" type="Area2D" parent="."]
position = Vector2(170.00002, -668)
rotation = 1.579224
scale = Vector2(1.6893996, 1.6216831)
collision_mask = 16

[node name="Track" type="Sprite2D" parent="Circuit"]
position = Vector2(723, 135)
scale = Vector2(2.6081083, 2.541587)
texture = ExtResource("1_w8frs")

[node name="OutterTrackLimit" type="CollisionPolygon2D" parent="Circuit"]
position = Vector2(723, 135)
scale = Vector2(2.8, 2.729)
polygon = PackedVector2Array(-176.40161, -40.65625, -190.55957, -59.411697, -201.67874, -83.80591, -202.06216, -110.95429, -194.77719, -134.16814, -180.97409, -153.44743, -162.95334, -160.13617, -136.49739, -162.49689, -113.875626, -164.85762, -77.120964, -167.4732, 181.7409, -186.10422, 208.19687, -180.2024, 228.90152, -170.75948, 244.62177, -156.20163, 255.35751, -139.28308, 265.32642, -116.46269, 262.48938, -81.74575, 255.35751, -63.346268, 244.62177, -50.36226, 235.41968, -41.706245, 214.035, -27.736526, 189.54355, -23.674456, 284.8808, 5.114914, 293.69946, 3.541069, 310.18652, 14.164351, 317.85492, 36.197826, 317.4715, 80.264786, 302.90155, 104.65899, 287.18134, 112.52808, 266.8601, 119.610275, 132.75803, 121.0043, 126.528496, 134.95502, 118.47668, 146.36523, 106.797424, 157.96414, 91.25389, 162.89034, 79.75131, 161.31653, -265.7098, 161.31653, -287.11227, 146.47945, -300.85355, 119.713104, -304.34988, 105.282684, -302.84222, 81.99446, -289.48184, 60.19861, -268.87778, 45.985653, -249.94846, 33.612892, -249.04648, 13.9456005, -240.50223, -1.7231207, -221.23315, -20.853115, -101.565216, -19.416065, -176.5411, -40.71376, -173.40582, -45.26135, -82.96182, -19.642027, -77.25397, -15.122838, -92.686325, -14.896878, -219.26004, -15.698487, -229.12256, -6.3449802, -235.43054, -1.9947748, -239.37756, 6.853512, -243.33527, 14.3460865, -243.70639, 20.902485, -245.3334, 29.051968, -245.90878, 36.514076, -258.32407, 43.856876, -268.84036, 50.730633, -286.05002, 66.70337, -291.4768, 75.56499, -298.16928, 85.429115, -297.7465, 99.4386, -294.36404, 117.06344, -288.02197, 130.621, -278.72028, 141.46704, -268.78436, 146.21219, -259.5751, 156.59506, 88.22561, 157.33426, 97.49848, 153.63525, 109.908424, 145.61461, 120.593346, 133.31612, 123.2221, 118.15262, 128.44559, 114.888824, 265.4373, 110.09248, 281.9184, 100.568375, 293.38354, 88.37384, 299.59, 71.14441, 299.7883, 42.670727, 296.48376, 25.752937, 290.89484, 14.05298, 278.36267, 6.688732, 181.76822, -17.729261, 173.2786, -21.946167, 184.43619, -27.92183, 201.73315, -32.82296, 219.14073, -39.77226, 230.15384, -47.99283, 243.33453, -65.511055, 245.76862, -81.32896, 245.76862, -105.506615, 240.90637, -132.16983, 228.22223, -148.43892, 215.32669, -161.99648, 204.12238, -167.19354, 193.55228, -174.87617, 182.34796, -174.87617, 164.23126, -177.33025, -156.107, -150.02061, -164.77449, -150.6985, -171.53937, -146.40526, -181.47527, -134.65536, -186.12611, -129.91022, -189.93137, -118.61225, -189.50854, -106.18448, -191.19977, -96.46822, -190.98836, -83.8145, -190.55957, -72.78917, -187.1088, -64.133156, -179.4404, -56.26406, -172.80777, -45.175438)

[node name="InnerTrackLimit" type="CollisionPolygon2D" parent="Circuit"]
polygon = PackedVector2Array(55.641052, 406.9846, 71.03113, 408.21786, 880.19434, 398.35153, 925.7727, 337.9205, 1001, 296, 1320.5875, 281.80594, 1357.2869, 279.956, 1343.6726, 264.53992, 916.8938, 170.19351, 884.3378, 133.81157, 870.1316, 51.181362, 899.7279, -22.199188, 964.24786, -48.714867, 1185.0364, -77.08045, 1220.552, -86.3301, 1243.0452, -98.04635, 1254.2917, -124.562004, 1234.7582, -164.6438, 1206.9377, -183.75977, 377.64893, -136.27817, 370.15686, -122.882935, 389.48746, -103.59609, 417.89993, -88.79664, 616.41113, -49.195175, 694.32947, -24.04911, 720.37427, 61.664307, 714.45496, 141.21129, 673.61206, 213.35855, 628.8381, 242.99503, 220.19656, 245.42404, 202.43878, 306.47174, 170.47476, 347.1702, 84.64545, 381.08554, 57.41684, 392.18515, 52.335754, 396.05624, 48.819214, 400.4038, 48.537933, 395.26837, 50.58352, 393.3311, 55.049133, 389.10193, 69.84729, 381.08554, 89.38086, 373.06918, 115.4256, 363.20288, 146.2058, 350.25342, 168.69899, 341.00375, 188.23256, 302.15524, 198.8872, 283.03928, 204.21455, 252.20712, 207.17418, 243.57413, 212.50153, 234.32446, 224.93198, 232.47452, 594.29395, 228.77466, 604.3567, 228.158, 625.71893, 223.28912, 645.79156, 216.44179, 658.149, 207.58777, 673.9858, 189.56543, 691.9618, 162.79381, 701.4326, 136.89479, 704.9842, 114.69563, 702.02454, 85.096756, 699.06494, 56.114517, 691.3699, 24.049065, 680.1233, -8.016388, 656.4462, -22.19918, 611.45984, -34.53205, 438.02542, -71.53063, 392.4471, -88.18, 378.0412, -99.51889, 367.90396, -108.67987, 361.93005, -115.410736, 360.05457, -127.727585, 364.12805, -136.39665, 374.6893, -141.82797, 1206.3457, -194.85934, 1225.8794, -187.45963, 1238.9016, -172.04352, 1246.5967, -159.09402, 1260.2109, -134.42828, 1260.803, -119.012215, 1259.0271, -104.829414, 1251.3322, -87.56341, 1230.0227, -77.08045, 1197.4668, -69.064095, 963.064, -38.231926, 923.40497, -12.332901, 900.3198, 22.815773, 889.66516, 59.81437, 897.3602, 90.64653, 905.6472, 111.612404, 911.56647, 139.36136, 935.2435, 153.54416, 961.8802, 172.04346, 1350.7758, 258.3735, 1360.8385, 265.77322, 1370.3093, 275.6395, 1370.3093, 287.97238, 1327.0986, 293.52216, 1005.0908, 304.62177, 969.57526, 319.4212, 949.4497, 331.13742, 932.2839, 344.0869, 922.81305, 355.80316, 913.3422, 372.4525, 907.423, 383.5521, 896.7683, 390.33517, 883.154, 403.9013, 72.215, 411.30106, 59.784546, 410.68445, 50.90564, 405.13467, 48.819214, 400.4038, 52.335754, 396.05624)

[node name="FinishLineArea" type="Area2D" parent="."]
collision_layer = 32
collision_mask = 16

[node name="FinishLine" type="Sprite2D" parent="FinishLineArea"]
position = Vector2(-619.4329, 604.3186)
rotation = -3.133165
scale = Vector2(0.47033647, 0.5515153)
texture = ExtResource("2_mx8sn")

[node name="FinishLineCollision" type="CollisionShape2D" parent="FinishLineArea"]
position = Vector2(-619.5, 604.5)
rotation = -3.133165
scale = Vector2(0.4703364, 0.55151534)
shape = SubResource("RectangleShape2D_8c41q")
one_way_collision = true
one_way_collision_margin = 0.1

[node name="Player" parent="." instance=ExtResource("3_w8frs")]
position = Vector2(-606, 725)
rotation = -1.5707964
scale = Vector2(1.2, 1.2)
collision_mask = 0
script = ExtResource("4_mx8sn")

[node name="Crash" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 16
script = ExtResource("7_klq6b")

[node name="MajorCrash" type="CollisionPolygon2D" parent="Crash"]
position = Vector2(170.00002, -668)
rotation = 1.5707964
scale = Vector2(1.6893996, 1.6216831)
polygon = PackedVector2Array(147.98155, 70.29734, 387.11978, 80.780266, 221.97234, 31.448807, 171.06668, -36.99859, 151.5331, -126.41187, 157.45236, -207.8088, 174.61823, -254.6737, 208.35802, -290.43903, 303.06622, -308.93832, 406.65332, -315.10474, 613.2356, -324.3544, 1203.3861, -366.9028, 1290.9912, -356.4199, 1356.6951, -337.9206, 1401.0895, -294.13895, 1445.484, -241.1076, 1470.9368, -120.862144, 1443.1162, -28.365654, 1401.0895, 27.132248, 1337.7534, 49.331413, 1240.0854, 80.16358, 1469.7529, 122.095314, 1489.8784, 144.29448, 1556.1742, 151.07755, 1602.9364, 214.59181, 1594.0575, 376.15234, 1565.0531, 435.3501, 1492.2461, 469.8821, 1430.0939, 475.43192, 1092.6958, 476.66522, 1080.2654, 508.11404, 1030.5437, 575.9448, 969.57526, 598.144, 13.0224, 592.59424, -56.23297, 572.245, -111.282135, 521.6803, -166.3313, 458.166, -158.63623, 371.2193, -114.83371, 309.55496, 13.022369, 224.45816, 14.798157, 165.26042, 48.537933, 87.563354, -235.58667, 120.86211, -235.58667, 796.7031, 1679.8867, 782.52026, 1664.4967, -519.21375, -221.38043, -511.19733, -235.58667, 121.47875, 75.76654, 75.84714)

[node name="MajorCrash1" type="CollisionPolygon2D" parent="Crash"]
polygon = PackedVector2Array(-467, -448, -455, -462, -440, -487, -382, -347, -307, -304, -243, -281, -236, 353, -237, 421, -202, 489, -118, 537, 14, 579, 193, 524, 235, 440, 322, 47, 356, 4, 372, -6, 388, -4, 447, 1337, 431, 1380, 399, 1421, 339, 1437, 313, 1406, 291, 1350, 249, 946, 208, 845, 68, 785, -75, 824, -130, 887, -268, 1511, -288, 1600, -302, 1582, -313, 1022, -363, 906, -471, 797)

[node name="RecoveryTimer" type="Timer" parent="."]
wait_time = 0.2

[node name="CoinArea" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 8
script = ExtResource("8_8c41q")
coin_scene = ExtResource("8_b121j")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="CoinArea"]
position = Vector2(-3, -6)
polygon = PackedVector2Array(-653, -680, -542, -767, -429, -781, -339, -706, -308, -586, -260, -512, -216, -423, -137, -356, -147, -204, -143, 61, -135, 272, 2, 415, 204, -196, 321, -252, 445, -256, 577, -165, 669, 1392, 626, 1515, 471, 1635, 309, 1655, 195, 1301, 65, 980, 5, 992, -26, 1090, -231, 1716, -300, 1718, -352, 1635, -393, 1542, -463, 1427, -500, 1093, -600, 1030, -563, 828, -651, -591, -660, -662, -630, -655, -642, -628, -629, -582, -554, 828, -579, 1000, -537, 1032, -489, 1064, -469, 1107, -471, 1181, -471, 1307, -462, 1385, -348, 1623, -323, 1663, -296, 1706, -237, 1703, -220, 1658, -48, 1040, -7, 961, 30, 923, 74, 936, 102, 983, 131, 1036, 143, 1134, 212, 1278, 316, 1601, 366, 1614, 426, 1614, 492, 1582, 523, 1548, 536, 1504, 595, 1460, 630, 1385, 639, 1294, 571, -44, 553, -147, 485, -204, 434, -234, 325, -228, 221, -175, 153, 18, 87, 217, 53, 340, 13, 428, -62, 387, -136, 294, -154, 199, -157, -342, -222, -392, -328, -600, -354, -695, -429, -755, -537, -742, -624, -671)

[node name="CoinInstance" parent="." instance=ExtResource("8_b121j")]
position = Vector2(-639, -507)
rotation = 0.0041108127

[node name="CrashAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_t1rx8")

[node name="Sondtrack" type="AudioStreamPlayer" parent="."]
stream = ExtResource("12_8iemx")
volume_db = -40.0

[connection signal="body_entered" from="Circuit" to="." method="_on_circuit_body_entered"]
[connection signal="body_exited" from="FinishLineArea" to="." method="_on_finish_line_area_body_exited"]
[connection signal="body_entered" from="Crash" to="Crash" method="_on_body_entered"]
[connection signal="timeout" from="RecoveryTimer" to="." method="_on_recovery_timer_timeout"]
[connection signal="area_entered" from="CoinInstance" to="." method="_on_coin_instance_area_entered"]
